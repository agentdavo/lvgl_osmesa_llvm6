--- CMakeLists.txt.orig	2025-01-01 00:00:00.000000000 +0000
+++ CMakeLists.txt	2025-01-01 00:00:00.000000000 +0000
@@ -6,6 +6,18 @@
 set(CMAKE_CXX_STANDARD 17)
 set(CMAKE_CXX_STANDARD_REQUIRED ON)
 
+# Option for relocatable build
+option(BUILD_RELOCATABLE "Build with relocatable paths using RPATH" OFF)
+
+# Configure RPATH for relocatable builds
+if(BUILD_RELOCATABLE)
+    set(CMAKE_SKIP_BUILD_RPATH FALSE)
+    set(CMAKE_BUILD_WITH_INSTALL_RPATH FALSE)
+    set(CMAKE_INSTALL_RPATH "$ORIGIN:$ORIGIN/../lib:$ORIGIN/../../llvm-install/lib:$ORIGIN/../../mesa-install/lib/x86_64-linux-gnu")
+    set(CMAKE_INSTALL_RPATH_USE_LINK_PATH FALSE)
+    include(${CMAKE_CURRENT_SOURCE_DIR}/cmake/SetupRelocatable.cmake OPTIONAL)
+endif()
+
 set(LLVM_SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/ext/llvm-project/llvm)
 set(LLVM_BINARY_DIR ${CMAKE_CURRENT_BINARY_DIR}/llvm-build)
 set(LLVM_INSTALL_DIR ${CMAKE_CURRENT_BINARY_DIR}/llvm-install)